language: node_js
sudo: required
node_js:
  - '4.3'
  - '7.5'
cache:
  edge: true
  directories:
    - $(npm root -g)
    - node_modules
    - deep_modules
    - $(npm config get prefix)/bin
branches:
  only:
    - master
    - dev
    - stage
    - test
before_install:
  - cp bin/test/package.json .
after_success:
  - npm run coverage
after_script:
  - npm run remove-coverage
env:
  global:
    - 'MAJOR_VERSIONS=master,stage'
    - DEEP_NO_INTERACTION=1
    - E2E_TESTING=none
    - secure: 
        cFvoqd5nmp3rCXVXLKNYwMpnuu5C9dNFNI10oHs/sdo0BxR+nwYjsZAH7QGasTywpCEljP+Fhi1KKwjs+4QnKephW0kh/XK+S6oZBXUZEOE5nGOwhahdtAcXjEhilxbPQZk/+VM8YRmEk/+Yfk8WySc9QzaZAbnumBcw6pIrs5oKU9R1/cZbEnorUvA3q/sQo5RAQXq99Pe260S4zF7itqfXJET93inGskbL7LbqCqHEk29rgSjMZgdSY4gTaGZmL1uAE4EUUrFOlWwr0H2u6DKbRCD6jkeGlueFrOYGIPb7vegw/3I4/qCXQEZkycJJFaJVb9pWYuK5klzDc6OTYCKPMuhUOYTcGmlJqdjs1Fqh8O0oCLPCVfoNH/lVMQZxUmhf9e8B5Inldn9kN0zTmVoAjV3rLiYL78PN4bb1gOM4NFgkNvgX4sh6Vv3/LgxpNJLzIBDlzX8sm8ICiL89AL/kOzuByy3IOqUI0FL3p7TwJ6mNwDUF0oLDy/B7J4dQRgviXIqOn658RSlM9Sic/03jj2czjkC5kIo8v906WyxS9ku5eiS7NhUGHcjP2e52gzfauhJcD/sGFUXLhVLB1Qj2RjkyMw6NqjSi774Mnj5vlV9fIWEIVeBGw9NLwWIA7wZBnUIuL8718BweS/Dv5M5Bo4GPIoULp8H/mB6HseY=
    - secure: 
        ceSaf3svc+5Yw1McBT5UJ7DOuPi3QzwzsoAb1uvHSJ5D3zux5npBlmmsQrpxAE7fi7aQew75phiL0bS9Ph5AGq83auTqVBE3d8V/6TIMZ7REgQBX99FFO9ldsjpj7Ge2FcSxM1OlFcj9LWtl6dj4VJ5GhToN5tdEnwrM70gkZQJlLhYsWWWsnOJzM51O/JJ0bq2OCOImXOvPd79YkeN4+lqSR2UEkQV/OXvFUK/BrXjcBNDe8jzQOewMeic1gpfthzSSpuXWcEVTinqbT8W+ZyomYWfTlEV12WfkQBrwOSz0sQ0Lk5K0C4umGzUGE/t0bukDu0Uk8+MW2dzSFWlzotBu/6yhElR4BifiSI/rw0q/o5/CpwpVIA0rZZ5bt/0CEg+/XNney19h7hS0G9Ic2mgYrBtEPDdf8x3mMz8MuyxlaqTkU2XIZEgklZQVDaX7+mlc3/6FmpaQFuMvt+koYXwOz/jaGDqgpMEuGel203H8yA5U51NAfKxOHGRhw72aGSoxeUDSyNRl2m/KrOgkaqAHZjbf6LJcU1CcgYmAyan0nBWVWQaXJ6GNEbZLSRwstOWN2y6MvZX+TsgNehKTPdnr5BW4FfWvsP0XmKxz9TajKhaoIht5biCQPhusrzdZJ+XKKpnphs2rCka5N5lozn24IwMAhhUcL7sgb6/fxJM=
    - secure: 
        UWLGGwSqTU/0rm9+lvFzb9Bjd4COlBK0cv1MiG4Leu5lgYJnOStkcXP21zsLYXFdca4Sc5spIEcztGhPtNSwxXEwzfzRNCpqD2s981IQUUyQgUtNxovMnUfAY5qxNhEddGMA95/7mQyGdgfvLuo8i3HNJQJeZwX1A+cHcJCBl1Sx9tSMhesiknEfrXhNB16qWZPX8NuR6+nj7yemmgFudBg7kTabfIffCF+raxLcB5xLUuvghAyLcCFKPuQkV8An5uqUUjowDopKrW494RFQ7TqSIcjt56U5LMQEifc5XIbv5HeWcgtk5V7USjHFvahHtLiVjLfXmEXWwTAFUZizyg6xhBEBCH1XnJYtgYM9kTDAIjyOOy9u97FfVdn9wupyrNlrb/80W+C+XQalkDmUwQCWWwGPoncbsBs+jPN6NPaoUSyyYYHl41Vx7Lz0oAfzE9u65OBMAr43w5FEbt2HfwIKKjVmEpTrKDkDrs+LNruSXWJ09htcwCSsSbx8qzADjdNepNcmxiqDuAEBqZz7Jsfwy35LLGgAl1w+nicbmeUYEFPCxeoEuZDdhZjxL5GA0E6AhKfOgU30x7lxeDQAAT38y+tSOE1uw6ICBh7bLKYnnkjWb0ueQ2k7kxj7tE9/LcPGDnkGfBhmNM+3lrrjpZ0SJjms3Gog+4YQV65aTU4=
    - secure: 
        Y4C5Uu5cuaB5Q4fZsisWxQQpjuG8Oxy+CWppzEuwy0OXP1G3pbawFBzQE+IcAT4I8n7hBsZV50l0J7JO28YyQlHEiMW+t0Z7QaLOg3y+peiNtxvIB1b1oKBs9WuBp8y+EMsQRdLjgcI5pwVnawfH0GVcvAKbAm2IUQqSzu2msqyYPWEiP/pRycZFTq1qW3AOaRcVzX4MrpDn4+too7+vCLuKWzO3OSduyZnM39dEzNmKO9geTPZwe5g6+TLsStgPNedMA2VpC6zLYlElE6a0tbvKphe4n/91hUJpANKgDRQV3DAzB7XDyrlUZtEMDASLHSXJkCxpvR5Yz2Kin2kmeRvG4j+q963PQEBDNQaz8UK0prRzeoTSUMWrzgE0g7d/eqe4VgyCNOe6m8a1CYnI/VkRYb1n+vZfNY1u0EIaJDItxP3qkdxNxZTsFnE/q4sGaDFiLlKXXdPzGUTITTjQN4mZLvBwSFe0ykfbq+fvri3/3VggDiHTzi3rgIlR4jBJf48X+8zsxzK+Fanv6f0NEsiJr89VYq29XUgh94dO8ai46IjXkHX/MU8x2eUZPCwlqb2IcFJox37ZP/9Z/qb3AJEsXC5rZ+jtYu7gHDTrQSAkPK8nwLaj7KisgYYog9nox2eiI1dEjv1qy8tK8qsSWpU/0uvFwIdiRKVidfMkG/E=
    - secure: 
        O2EaZbrTzmoOZPyv9I+gLawh1xgnC+1NzZv9i0Hyrhw12lU19XWbEyk5TUPGbLf3Q8IXe+S/iWfC2PTroQxflruB/73AZ7nyRHlWg1l64/BSabABJxoRKrIIo4ktCaDeXimKmzvkvfre/7JXexSxzZEeobUKfut5Xmg9JtBctAL0tmUo7WJ+OOapggHNFZgp0GNLBD4WlD7Yu0Tn6flqnNnfhU3Bg5ClVeCrdZUBG7grVd+PDHXfYRfzXbf+k4gjE5kanUj4eJnPDbuEnRcqts2wK2r00i3BAHAFyHVr+VkIFGBFH6BDUcCbqD3M/84rBTLsUM7KkueBk8Qo8ZINGNGRq9O8C383zl49tJdgv+LJZuK7Nr8fWf3pYbsL3U/Qg6vV3XQFMa0qPN0Q2MS8dv35jPsAuowIHWD3DI4Tw61jbMinMY6CdWfBfIGOGX9UEbwl9cNYqE148JwyQCmV0w6qcJEMhNRw4+9e4KWS2uwTsLWrXsIDpGd8e62/wvYbfc63gMybe4qnS74kAYeId6TtKrtfnBYjhi+uiE4B7JHoQ+MhIVqkbcaY8yMA7gFhsYOcZMgyxpzM9jmcltc8f/QyQYs7FmrAFtwl51OZoQhjKLzn/G7C5f1uMP1Ca1DzPHOQLCwNMon73W38vIM2S0SYCbuKnS/E/Av6Hx4F6j4=
    - secure: 
        GC2zs/SBBXtgyvja6O0llp45f0lXTuwHOiqs6i3HmTYokdcJra8nNRw2HCF3dbVXmdG0Ik8Rfk9DsO6O4EQ0OllYBDdZ65lNkmbsm2fJiWh9XoKPyD+3mpU1GxuWcf6fE0H1O6CL8V4rKhP6sa38uoU++XiRk20jGs7bYD0ehyAtqokAokqMPS2FDlodDURWvS4TjGivia1LHK8lSJW2heqoIUsoDmnmYorJ3oqvLOJcaa/hwATDt7c7YPgzcdwKluU3cLTxwIs5DyjGpo7Yjt4qyi088w59OgO8j70/2rgExGyDXsO0k5DBDjP88G0rRTofhCtkdbhZ0s30li32YnHE4EYnK6dTozF6GcOIXtWt889UBV+Qg8a1R17N8hL3iAh0shiKbeENPPBFPttop88Wahrj48jl87GDjqG5Rx8Stl94xcjfjew1XZNpu0LvoaXcyavXyT6g0dU4V+Tq3r9Gn57sxAP30qmOQAGRsoy6t9Sn77lt7RdZHrNw+t0Cci4C7SuL4dOivacegTTEy1wq4iVJli+jFaTNBrl2xElV31AtHEXq9vLZcyXQRA5gOtRdBlNRAZmEgn+Ngmul5as2IamlODP/2fI5WuUmDY8aTg1hIc2FNAdVwvYt8YIJTRjuB1lfafLGka21ldoPD/y/TSZyIUaTK/w6E6psAKA=
    - secure: 
        AfJyQ/uTYESmAwSdX5TFyiDSLAsSCVgi2O6evez3wKDdzuD11oZMo4prHupBdG8OOiG2cTRAaZOhNm3XwQOK63+cS7/nVwsfSqXLDxWUDWD5JM/+0Z8TNFPWf8I2tpflcLks5xRBVf3z8GPLB0MqdG/pj8bHDD9oqlKiPRqVtybpuLtFQC64d51L4JsTMX/LczCjTD5t21R9HiLfvpewqMEG/Z1vdCkpFxLOz2x0351paJonhP1GEGhIAPM82LqYFljyqU+0KcKQJQCWl5laSK9Qu/y4pwVWDGv07VNSLUU/UjWokniaLSdDryw/9/PKBCj45TMvjrmb4cYkOarWnG1c/Gh8kB9bVeIienJG9qC0SwCOS+8zhQokCttHyxoGymeZ6EAKZ2qfBwx+FquyUgnhpuuENde8I5zDbMwUD/tTeejMdzKyd3uYIH/Gs8E+p2emlP9S+OMq03In97zl3PJi5fWITokk7g43RFSzBZooj3WNRqkXRxGfS9Pf0iyQT6luQ2UQ9bUaI8TcYUMv7jhwvl50vsjswZUrSlnitPZ1R4uTgCnc/Y3avMNIN6zwrdnOIpd/GzN8qJA6fepS8/654phtlS86txmqX1CRCS0CFFfdycITWANZ2lNYoHWQGaiwISSi5y0i+5eseIPuuBJa3XVDDTQfeGDxDn6VW3E=
    - secure: 
        jXxTvnKDIghxgwb6GIvHEkIY2VLCf1CSnOBtM229EC6XY2pcbvjBW89rBnfrp+4KNjbiCviC/drVGcSCw7xoIf6bVMNuL9Gsc/kqT9vMbgWoVVbnge5cupMSzhUbQCyqLCIu/lz6x2solzZaI3lhAQLGN0GHjtqgd59zRF13cqw0w08tupiCI7PuehQoCNEKwb3zRl1iVPul5eFR2ordXwl3zlBT/SG2MRCWWMGXYsAE/nfXxyj5PkpllM+fl5pElpOwJh4+k/BwWVxz1GAWjTVo0diJTUI6iWlOymAg3Lg5HB6MGTh1sFcK+2Pr0i5zN4ngF0v0A1tIap+NS80CxilLEvUN0IFMMWKMDxIgBCElU87iqKig/9up+sS0tB19/G/hopiYRyyQ3kuDVgS7/OF0pFEVyPp3q6arFgzYX3pRbxeKC6f3VJkmQb9JGxwhsEcdVijj0DYfcFoRACrXMmbZyJM9KGAqqoKWPJIMsPQ1uefEIpR/aFc/sKuevQ3jdcGiG4Q7T72DHgEXAvIIoM6dWw7aVO8s6CPXWJZ1jms/ZiWnONZ+lJ1CXPHZE/tt9CZ7Y5haUsCuXDEw4rr0zMHu1lnZjXOOqVDjqQosR4ROKwT/i1cRaTRJ8UcIbcXMX/sr1bvqDTurOUWCQQcABdLYtxrRph5BqTf8eorECpA=
  matrix:
    - TEST_SUITE=backend
    - TEST_SUITE=frontend
notifications:
  slack:
    secure: 
      MS1n6DfKgz4EXJJJ8v875n42dGxdzWvIbuWAkuAU4mCB0osrO3f/EyEyJGpJjLD6Q5imZ2jR1cOuOU9Xt35aIdKLQknGuajyM156Thy/aIanowG1QTwI5dUcMzJo5W+WQ5ghl+EuDRJNq6QgjXBrYMrDy5y91sr6G4hF12fP8XFy4EV3DhVFdQbBDAyXk6aJPbDWLN0VPYfd7B3FtTicVTO++niWG6/xEidEzv5jt86VrNZKlTsBvRc8I2bGGd+D1+lr7Q0g0uqEHMj41kYzJLlPxaUlbS5vFv978xqSrO8pbLZ+3BYQs9H4rm1kEfjkCEIPPZ15ifkrLrejjmmY7xInlCKHwa/qYivjp4VCc6paW+qufG192iT1N4rNH7KXhjPvwSjxz3uvG1YgNAWTWkuJOuOzn5IuEjV/3iJk6lcoNtX21jb3iA8ejbF1GOdVBixTw5AZJN1KEQ3zU67cUSrtSvZGxR7PFnnAUFMukXvqLe497gtVVo8Gx6mVV9q6joguSYLrQEy5opcNkN7V4GA3+fffOeKT1tf6yqUkZk5aNlSHWsMJ2Ob9rgtEMNBMyUlMRAuzLbr9jCXvuYk/KU8zbbQhaDN6SIovWS1r6J/uMFWg1dNdgj29QhYjPie/XH/qU6TvsrlZ5795CTTi0jkQEw8d6mxKyTP817+hUBc=
addons:
  sauce_connect: true
