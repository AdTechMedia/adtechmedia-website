| ID | Component \ <br> Description  | Designed Steps       |Expected Result     |	Created By \ <br> Last Updated |
| -- | -- | -- | -- | -- |
| ATM_14 | ATM API Tabs page <br> <br>  Verifies API page subsections (GUIDE) of AdTechMedia | 1. Navigate to https://www-dev.adtechmedia.io/api | 1. Page is opened on API           | Alexandr Urita \ <br> 15.06.2017 |
|       |       | 2. Click on the More button link that is located on the RIGHT |     2. User is navigated to the page with Guide <br> https://www-dev.adtechmedia.io/user-guide/ |    |  
|       |       | 3. Check the left navigation menu under Logo of the site |     3. Menu contains from links that could navigate on the page. The list of menu: <br> <br> Getting started <br> Introduction <br> Base endpoints <br> Authorization <br> User Guide <br> Prerequisites <br> <br> Step 1. Create an ATM API key to be used with web services calls <br> Step 2. Create a Property to identify your web site or web application <br> Step 3. Place atm.min.js to the bottom of the web page <br> <br> Useful Links |    |  
|       |       | 4. Click on Introduction |     4. Introduction should be highlighted with light blue color. Page should be scrolled till INTRODUCTION section. Content of section: <br> ATM stands for AdTechMedia, the advertising platform with micropayments capabilities for media content monetization. ATM API is a set of web services designed to support the AdTechMedia platform. The white labeled nature of AdTechMedia allows direct integration into any web site or web application as native look and feel. |    |  
|       |       | 5. Click on Base endpoints |     5. Base endpoints should be highlighted with light blue color. Page should be scrolled till [Base endpoints] section. Content of section: <br> AdTechMedia platform runs multiple environments. The following are the base endpoints per environment: <br> [x] Production environment: https://api.adtechmedia.io/v1 <br> [x] Development environment: https://api-dev.adtechmedia.io/v1 <br> [ ] Staging environment: https://api-stage.adtechmedia.io/v1 <br> [ ] Testing environment: https://api-test.adtechmedia.io/v1 |    |  
|       |       | 6. Click on Authorization |     6. Authorization should be highlighted with light blue color. Page should be scrolled till [Authorization] section. Content of section: <br> No matter whatever environment you use, the ATM API key is associated to a very limited free plan. If you constantly reach API limits, please contact ATM administrators to switch to a higher premium plan. |    |  
|       |       | 7. Click on User Guide |     7. Prerequisites should be highlighted with light blue color. Page should be scrolled till USER GUIDE section |    |  
|       |       | 8. Click on Prerequisites |    8. Prerequisites should be highlighted with light blue color. Page should be scrolled till [Prerequisites] section. Content of section: <br> This quick user guide uses curl command line interface as reference. We’ll setup ATM API base endpoint as environmental variable to be used in further examples: <br> <br> # `Production` environment <br> export  ATM_API_BASE='https://api.adtechmedia.io/v1' <br> export ATM_WWW_BASE='https://www.adtechmedia.io' <br> <br> # `Development` environment <br> export ATM_API_BASE='https://api-dev.adtechmedia.io/v1' <br> export ATM_WWW_BASE='https://www-dev.adtechmedia.io' <br> <br> # `Staging` environment <br> export ATM_API_BASE='https://api-stage.adtechmedia.io/v1' <br> export ATM_WWW_BASE='https://www-stage.adtechmedia.io' <br> <br> # `Testing` environment <br> export ATM_API_BASE='https://api-test.adtechmedia.io/v1' <br> export ATM_WWW_BASE='https://www-test.adtechmedia.io' <br> Use only one environment at a time. Don’t use the API key from one environment in another one. |    |
|       |       | 9. Click on Step 1 |     9. [Step 1. Create an ATM API key to be used with web services calls] should be highlighted with light blue color. Page should be scrolled till [Step 1...] section. Content of section: <br> <br>  1.1 Generate the API key: <br> curl -XPOST ""$ATM_API_BASE/deep-account/client/register"" \ <br>      -d '{ ""Email"" : ""hello@adtechmedia.io"" }' <br>  <br> [?] 1.1.1 In case your email is already registered you’ll have to confirm your identity and request a new api token. <br> curl -XPUT  ""$ATM_API_BASE/deep-account/client/token-send"" \ <br>      -d '{ ""Email"" : ""hello@adtechmedia.io"", ""LinkTpl"": ""https://example.com/AdTechMedia/activate?atm-token=%tmp-token%"" }' <br> An email will be send for identity confirmation that includes the link provided in the LinkTpl parameter containing an activation key (in place of %tmp-token% placeholder) <br> <br> [?] 1.1.2 After getting the atm-token you’ll have to exchange it for an Api Key. <br> curl -XGET ""$ATM_API_BASE/deep-account/client/token-exchange?Email=hello@adtechmedia.io&TempToken=atm-token"" <br> <br> 1.2 Save response as environmental variable(s) for further use: <br> export ATM_API_KEY=""xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"" // the value associated to `$response.apiKey` <br> Any further requests to ATM APIs must include this API key |    |  
|       |       | 10. Click on Step 2 |     9. [Step 2. Create a Property to identify your web site or web application] should be highlighted with light blue color. Page should be scrolled till [Step 2...] section. Content of section: <br> 2.1 Create the Property: <br> <br> curl -XPUT ""$ATM_API_BASE/atm-admin/property/create"" \ <br>     -H ""X-Api-Key: $ATM_API_KEY"" \ <br>     -H ""Content-Type: application/json"" \ <br>     -d '{ <br>         ""Name"": ""Your web site / web application name"", <br>         ""Website"": ""https://example.com"", <br>         ""SupportEmail"": ""hello@adtechmedia.io"", <br>         ""Country"": ""USA"", <br>         ""ConfigDefaults"": { <br>             ""targetModal"": { <br>                 ""targetCb"": ""function(modalNode, cb) { modalNode.mount(document.getElementById('#header'), modalNode.constructor.MOUNT_APPEND) }"", <br>                 ""toggleCb"": ""function(cb) { cb(true) }"" <br>             }, <br>             ""content"": { <br>                 ""authorCb"": ""function(onReady) { onReady({fullName: 'Administrator', avatar: 'https://avatars.io/twitter/mitocgroup' }) }"", <br>                 ""container"": ""main > article.story"", <br>                 ""selector"": ""h3, p, div.paragraph, cite"" <br>             } <br>         } <br>     }' <br> <br> ConfigDefaults basic parameters explanation: <br> $payload.ConfigDefaults.targetModal.targetCb is a javascript hook (aka callback) for indicating where the ATM Modal should be inserted <br> $payload.ConfigDefaults.targetModal.toggleCb is a javascript hook (aka callback) for showing or hiding the ATM Modal (e.g. cb(true) - show, cb(false) - hide) <br> $payload.ConfigDefaults.content.authorCb is a javascript hook (aka callback) used to indicate the content’s author <br> $payload.ConfigDefaults.content.container is a css3 selector used by document.querySelectorAll() function to find the content blocks available on the web page <br> $payload.ConfigDefaults.content.selector is a css3 selector used by $contentBlock.querySelectorAll() function (where $contentBlock is a block’s HTML node) to find the content units to be scrambled inside each content block <br> To get the list of all supported countries and available revenue models per country use ATM API endpoint ending in /property/supported-countries <br <br> 2.2 Save response as environmental variable(s) for further use: <br> export ATM_API_PROPERTY=""xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"" // the value associated to `$response.Id` <br> export ATM_JS=""$ATM_WWW_BASE/atm-admin/$ATM_API_PROPERTY/atm.min.js"" // the value associated to `$response.BuildPath` |    |  
|       |       | 11. Click on Step 3 |     11. [Step 3. Place atm.min.js to the bottom of the web page] should be highlighted with light blue color. Page should be scrolled till [Step 3...] section. Content of section: <br>   !-- Place It At The End of The Content Page -- <br>   script type=""javascript"" src=""$ATM_JS"">/script> <br>   /body> <br> /html> <br> <br> (Need to add "<" before each ">")<br> <br> Append a query parameter (e.g. ?_v=20170101235959) to atm.min.js path that is ideally valid for 24 hours |    |  
|       |       | 12. Click on Useful Links |     12. [Useful Links] should be highlighted with light blue color. Page should be scrolled till [Step 3...] section. Content of section: <br>   ATM API Docs |    |  
|       |       | 13. Click on ATM API Docs link |     13. User should be navigate to https://mitocgroup.github.io/atm/api/ page |    |  
|       |       | 14. Click on GETTING STARTED |     14. Page should be scrolled up till header GETTING STARTED |    |  
|       |       | 15. Click on Arrow next to Getting Started section |     15. User should be navigated https://www-dev.adtechmedia.io/api/ |    | 
